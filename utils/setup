#!/bin/bash

#script to automatically download libraries and configure microSWIFT
#takes float ID as an argument
#takes git username and email as arguments

#ask user for input
read -p "Enter the three digit microSWIFT floatID: " floatID
read -p "Enter your Github username: " username
read -p "Enter your Github email: " useremail

#download python libraries
#sudo apt-get install build-essential python-dev python-smbus python-pip
#sudo pip3 install adafruit-mcp3008
#sudo pip3 install adafruit-mcp3008
#sudo pip3 install Adafruit-GPIO
#sudo pip3 install spidev
#sudo pip3 install pynmea2
#sudo pip3 install adafruit-blinka
#sudo pip3 install adafruit-circuitpython-busdevice
#sudo pip3 install git+git://github.com/chrisb2/pi_ina219.git 

#remove extraneous programs
echo "Removing extraneous programs"
#sudo apt purge libreoffice*
#sudo apt purge wolfram-engine minecraft-pi sonic
#sudo apt clean
#sudo apt autoremove

#log in to git
echo "Pulling latest build from Github"
git config --global user.name "$username"
git config --global user.email $useremail

#pull latest from git
cd microSWIFT
#git reset --hard
git checkout main
git pull

#configure Config.dat
file=Config.dat
/bin/sed -i "s/^\(floatID=\).*/\1${floatID}/" ${file}
<<<<<<< HEAD
=======

#setup static IP address with floatID
sudo nano /etc/dhcpcd.conf
sudo cat >> /etc/network/interfaces << EOF
auto enp0s3
iface enp0s3 inet static
    address 192.168.0.85
    gateway 192.168.1.1
    netmask 255.255.255.0
    network 192.168.1.0
    broadcast 192.168.1.255
EOF

#have Raspberry pi run headless
#sudo raspi-config
>>>>>>> 8c4c23a074f9c7e27c078244ec2e6f73c0445051

#reboot
echo "rebooting"
#sudo reboot

#make executable
chmod u+x setup